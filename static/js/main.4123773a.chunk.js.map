{"version":3,"sources":["IssueForm.module.scss","Intro.module.scss","en-US.ts","zh-CN.ts","LocaleContext.ts","I18n.tsx","IntroModal.tsx","Intro.tsx","BugForm.tsx","FeatureForm.tsx","PreviewModal.tsx","ReproModal.tsx","createPreview.ts","api.ts","hooks/useSimilarIssues.ts","hooks/useVersions.ts","IssueForm.tsx","App.tsx","index.tsx","App.module.scss"],"names":["module","exports","enMessages","require","window","appLocale","en","messages","locale","data","appLocaleData","zhMessages","zh","LocaleContext","createContextIO","cache","localStorage","getItem","navigator","language","toLowerCase","getLocale","texts","intro","introModal","motivationHelp","proposalHelp","reproHelp","reproModal","stepsHelp","I18n","id","restProps","React","Text","IntroModal","visible","onCancel","title","defaultMessage","footer","width","className","Intro","introRef","current","addEventListener","e","target","getAttribute","preventDefault","styles","ref","modalVisible","FormItem","Form","Item","Option","Select","TextArea","Input","BugForm","versions","span","name","rules","required","label","help","showSearch","map","version","key","value","offset","validator","rule","a","includes","Promise","reject","resolve","extra","type","autoSize","minRows","FeatureForm","md","Remarkable","PreviewModal","content","onCreate","cancelText","onClick","dangerouslySetInnerHTML","__html","render","ReproModal","createPreview","issueType","values","weapp","system","react","reproduction","browser","steps","expected","actual","repo","createReproductionLink","trim","createBugPreview","motivation","proposal","createFeaturePreview","link","indexOf","compareVersions","npmMapping","checkStatus","response","status","Error","statusText","orderVersions","normalVersions","nextVersions","forEach","match","push","sort","b","useSimilarIssues","similarIssues","searchIssues","keyword","q","encodeURIComponent","fetch","then","json","items","api","_issues","useVersions","repoVersions","fetchVersions","npmPromise","Object","keys","filter","ver","slice","releases","r","prerelease","tag_name","catch","err","console","warn","params","location","search","split","reduce","acc","param","IssueForm","props","useForm","form","getContent","getFieldsValue","setContent","preview","setPreview","triggerPreview","newPreview","getFieldValue","formRef","bindModalHandler","restoreValues","omitFields","JSON","parse","setFieldsValue","setTimeout","currentValues","handleRepoChange","resetFields","handleTypeChange","handleTitleBlur","handleCreate","replace","withConfirm","withMarker","body","clear","open","similarIssuesList","similar","issue","href","html_url","rel","layout","size","initialValues","onFinish","onValuesChange","_","preForm","cacheForm","setItem","stringify","onChange","Group","radioGroup","Button","onBlur","length","noStyle","shouldUpdate","prev","next","submitBtn","htmlType","icon","BugOutlined","Header","Layout","Content","Footer","App","localeString","forceUpdateLocale","addLocaleData","Provider","header","headerContainer","logo","alt","src","read","write","switchLocale","style","textAlign","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.4123773a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"submitBtn\":\"IssueForm_submitBtn__2i6iD\",\"radioGroup\":\"IssueForm_radioGroup__3pcx2\",\"similar\":\"IssueForm_similar__32aVZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"intro\":\"Intro_intro__3VhcL\"};","import * as appLocaleData from 'react-intl/locale-data/en';\n\nconst enMessages: any = require('./locales/en.json');\n\n(window as any).appLocale.en = {\n  messages: {\n    ...enMessages,\n  },\n  locale: 'en-US',\n  data: appLocaleData,\n};","import * as appLocaleData from 'react-intl/locale-data/zh';\n\nconst zhMessages: any = require('./locales/zh.json');\n\n(window as any).appLocale.zh = {\n  messages: {\n    ...zhMessages,\n  },\n  locale: 'zh-CN',\n  data: appLocaleData,\n};\n","import { createContextIO } from \"react-context-io\";\n\nfunction getLocale() {\n  const cache = window.localStorage.getItem(\"locale\");\n  if (cache) {\n    return cache;\n  }\n  return window.navigator.language.toLowerCase() === \"zh-cn\" ? \"zh\" : \"en\";\n}\n\nconst LocaleContext = createContextIO<string>(getLocale());\n\nexport function switchLocale(forceUpdateLocale: any) {\n  const locale = LocaleContext.read() === \"en\" ? \"zh\" : \"en\";\n  forceUpdateLocale(locale);\n  LocaleContext.write(locale);\n  window.localStorage.setItem(\"locale\", LocaleContext.read());\n}\n\nexport default LocaleContext;\n","import * as React from \"react\";\nimport { importMDX } from \"mdx.macro\";\nimport LocaleContext from \"./LocaleContext\";\n\nconst texts: any = {\n  en: {\n    intro: importMDX.sync(\"./locales/en/intro.md\"),\n    introModal: importMDX.sync(\"./locales/en/introModal.md\"),\n    motivationHelp: importMDX.sync(\"./locales/en/motivationHelp.md\"),\n    proposalHelp: importMDX.sync(\"./locales/en/proposalHelp.md\"),\n    reproHelp: importMDX.sync(\"./locales/en/reproHelp.md\"),\n    reproModal: importMDX.sync(\"./locales/en/reproModal.md\"),\n    stepsHelp: importMDX.sync(\"./locales/en/stepsHelp.md\")\n  },\n  zh: {\n    intro: importMDX.sync(\"./locales/zh/intro.md\"),\n    introModal: importMDX.sync(\"./locales/zh/introModal.md\"),\n    motivationHelp: importMDX.sync(\"./locales/zh/motivationHelp.md\"),\n    proposalHelp: importMDX.sync(\"./locales/zh/proposalHelp.md\"),\n    reproHelp: importMDX.sync(\"./locales/zh/reproHelp.md\"),\n    reproModal: importMDX.sync(\"./locales/zh/reproModal.md\"),\n    stepsHelp: importMDX.sync(\"./locales/zh/stepsHelp.md\")\n  }\n};\n\nexport interface Props {\n  id: string;\n  [name: string]: any;\n}\n\nconst I18n: React.FC<Props> = ({ id, ...restProps }) => {\n  const locale = React.useContext(LocaleContext);\n  const Text = texts[locale][id];\n\n  return (\n    <div {...restProps}>\n      <Text />\n    </div>\n  );\n};\n\nexport default I18n;\n","import * as React from \"react\";\nimport { Modal } from \"antd\";\nimport { FormattedMessage } from \"react-intl\";\nimport I18n from \"./I18n\";\n\ninterface Props {\n  visible: boolean;\n  onCancel: () => any;\n}\n\nconst IntroModal: React.FC<Props> = ({ visible, onCancel }) => (\n  <Modal\n    title={\n      <FormattedMessage\n        id=\"intro.modal\"\n        defaultMessage=\"The reason behind our strict issue policy\"\n      />\n    }\n    footer=\"\"\n    visible={visible}\n    onCancel={onCancel}\n    width=\"680px\"\n  >\n    <I18n className=\"paragraph\" id=\"introModal\" />\n  </Modal>\n);\n\nexport default IntroModal;\n","import * as React from \"react\";\nimport IntroModal from \"./IntroModal\";\nimport I18n from \"./I18n\";\nimport { state } from \"reactive.macro\";\nimport styles from \"./Intro.module.scss\";\n\nconst Intro: React.FC = () => {\n  let modalVisible = state(false);\n  const introRef = React.useRef<null | HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    introRef.current!.addEventListener(\"click\", (e: Event) => {\n      if ((e.target as any).getAttribute(\"href\") === \"#intro-modal\") {\n        e.preventDefault();\n        modalVisible = true;\n      }\n    });\n  }, []);\n\n  return (\n    <div className={`${styles.intro} paragraph`} ref={introRef}>\n      <IntroModal\n        visible={modalVisible}\n        onCancel={() => (modalVisible = false)}\n      />\n      <I18n id=\"intro\" />\n    </div>\n  );\n};\n\nexport default Intro;\n","import * as React from \"react\";\nimport { Form, Row, Col, Input, Select } from \"antd\";\nimport { FormattedMessage } from \"react-intl\";\nimport I18n from \"./I18n\";\n\nconst FormItem = Form.Item;\nconst { Option } = Select;\nconst { TextArea } = Input;\n\ninterface Props {\n  versions: string[];\n}\n\nconst BugForm: React.FC<Props> = ({ versions }) => (\n  <div>\n    {/* ==================================== Environment ==================================== */}\n    <Form.Item>\n      <Row>\n        <Col span={11}>\n          {/* wux version */}\n          <FormItem\n            name=\"version\"\n            rules={[{ required: true }]}\n            label={\n              <FormattedMessage id=\"issue.version\" defaultMessage=\"Version\" />\n            }\n            help={\n              <FormattedMessage\n                id=\"issue.versionHelp\"\n                defaultMessage=\"Check if the issue is reproducible with the latest stable version.\"\n              />\n            }\n          >\n            <Select showSearch={true}>\n              {versions.map(version => (\n                <Option key={version} value={version}>\n                  {version}\n                </Option>\n              ))}\n            </Select>\n          </FormItem>\n        </Col>\n        <Col span={12} offset={1}>\n          {/* weapp version */}\n          <FormItem\n            name=\"weapp\"\n            rules={[{ required: true }]}\n            label={<FormattedMessage id=\"issue.weapp\" defaultMessage=\"Wechat Miniprogram Version\" />}\n            help={\n              <FormattedMessage\n                id=\"issue.weappHelp\"\n                defaultMessage=\"Wechat Miniprogram Version...\"\n              />\n            }\n          >\n            <Input />\n          </FormItem>\n        </Col>\n        {/* <Col span={12} offset={1}> */}\n          {/* react version */}\n          {/* <FormItem\n            name=\"react\"\n            rules={[{ required: true }]}\n            label={<FormattedMessage id=\"issue.react\" defaultMessage=\"React\" />}\n            help={\n              <FormattedMessage\n                id=\"issue.reactHelp\"\n                defaultMessage=\"react/react-native version...\"\n              />\n            }\n          >\n            <Input />\n          </FormItem>\n        </Col> */}\n      </Row>\n    </Form.Item>\n\n    <Form.Item>\n      <Row>\n        {/* System */}\n        <Col span={11}>\n          <FormItem\n            name=\"system\"\n            rules={[{ required: true }]}\n            label={\n              <FormattedMessage id=\"issue.system\" defaultMessage=\"System\" />\n            }\n            help={\n              <FormattedMessage\n                id=\"issue.systemHelp\"\n                defaultMessage=\"System version...\"\n              />\n            }\n          >\n            <Input />\n          </FormItem>\n        </Col>\n\n        {/* Browser */}\n        {/* <Col span={12} offset={1}>\n          <FormItem\n            name=\"browser\"\n            rules={[{ required: true }]}\n            label={\n              <FormattedMessage id=\"issue.browser\" defaultMessage=\"Browser\" />\n            }\n            help={\n              <FormattedMessage\n                id=\"issue.browserHelp\"\n                defaultMessage=\"Browser version...\"\n              />\n            }\n          >\n            <Input />\n          </FormItem>\n        </Col> */}\n      </Row>\n    </Form.Item>\n\n    {/* ==================================== Reproduce ==================================== */}\n    <FormItem\n      name=\"reproduction\"\n      rules={[\n        {\n          required: false,\n          validator: async (rule, value) => {\n            if (value && value.includes(\"wuxui.com\")) {\n              return Promise.reject(\"Please provide valid reproduction url\");\n            }\n            return Promise.resolve();\n          }\n        }\n      ]}\n      label={\n        <FormattedMessage\n          id=\"issue.reproduction\"\n          defaultMessage=\"Link to minimal reproduction\"\n        />\n      }\n      extra={<I18n id=\"reproHelp\" />}\n    >\n      <Input type=\"url\" />\n    </FormItem>\n\n    <FormItem\n      name=\"steps\"\n      rules={[{ required: true }]}\n      label={\n        <FormattedMessage id=\"issue.steps\" defaultMessage=\"Step to reproduce\" />\n      }\n      help={<I18n id=\"stepsHelp\" />}\n    >\n      <TextArea autoSize={{ minRows: 2 }} />\n    </FormItem>\n    <FormItem\n      name=\"expected\"\n      rules={[{ required: true }]}\n      label={\n        <FormattedMessage\n          id=\"issue.expected\"\n          defaultMessage=\"What is expected?\"\n        />\n      }\n    >\n      <TextArea autoSize={{ minRows: 2 }} />\n    </FormItem>\n    <FormItem\n      name=\"actual\"\n      rules={[{ required: true }]}\n      label={\n        <FormattedMessage\n          id=\"issue.actually\"\n          defaultMessage=\"What is actually happening?\"\n        />\n      }\n    >\n      <TextArea autoSize={{ minRows: 2 }} />\n    </FormItem>\n    <FormItem\n      name=\"extra\"\n      label={\n        <FormattedMessage\n          id=\"issue.extra\"\n          defaultMessage=\"Any additional comments?(optional)\"\n        />\n      }\n      help={\n        <FormattedMessage\n          id=\"issue.extraHelp\"\n          defaultMessage=\"e.g. some background/context of how you ran into this bug.\"\n        />\n      }\n    >\n      <TextArea autoSize={{ minRows: 2 }} />\n    </FormItem>\n  </div>\n);\n\nexport default BugForm;\n","import * as React from \"react\";\nimport { Form, Input } from \"antd\";\nimport { FormattedMessage } from \"react-intl\";\nimport I18n from \"./I18n\";\n\nconst FormItem = Form.Item;\nconst { TextArea } = Input;\n\nconst FeatureForm: React.FC<{}> = () => (\n  <div>\n    <FormItem\n      name=\"motivation\"\n      rules={[{ required: true }]}\n      label={\n        <FormattedMessage\n          id=\"issue.motivation\"\n          defaultMessage=\"What problem does this feature solve?\"\n        />\n      }\n      help={<I18n id=\"motivationHelp\" />}\n    >\n      <TextArea autoSize={{ minRows: 2 }} />\n    </FormItem>\n    <FormItem\n      name=\"proposal\"\n      rules={[{ required: true }]}\n      label={\n        <FormattedMessage\n          id=\"issue.proposal\"\n          defaultMessage=\"What does the proposed API look like?\"\n        />\n      }\n      help={<I18n id=\"proposalHelp\" />}\n    >\n      <TextArea autoSize={{ minRows: 2 }} />\n    </FormItem>\n  </div>\n);\n\nexport default FeatureForm;\n","import * as React from \"react\";\nimport { Modal, Button } from \"antd\";\nimport { FormattedMessage } from \"react-intl\";\nimport Remarkable from \"remarkable\";\n\nconst md = new Remarkable();\n\ninterface Props {\n  visible: boolean;\n  content: string;\n  onCancel: () => any;\n  onCreate: () => any;\n}\n\nconst PreviewModal: React.FC<Props> = ({\n  visible,\n  content,\n  onCancel,\n  onCreate\n}) => (\n  <Modal\n    title={\n      <FormattedMessage\n        id=\"previewModal.title\"\n        defaultMessage=\"Issue Preview\"\n      />\n    }\n    cancelText=\"\"\n    width=\"680px\"\n    visible={visible}\n    onCancel={onCancel}\n    footer={\n      <Button onClick={onCreate} type=\"primary\">\n        <FormattedMessage id=\"issue.create\" defaultMessage=\"Create\" />\n      </Button>\n    }\n  >\n    <div\n      className=\"paragraph\"\n      dangerouslySetInnerHTML={{ __html: md.render(content) }}\n    />\n  </Modal>\n);\n\nexport default PreviewModal;\n","import * as React from \"react\";\nimport { Modal } from \"antd\";\nimport { FormattedMessage } from \"react-intl\";\nimport I18n from \"./I18n\";\n\ninterface Props {\n  visible: boolean;\n  onCancel: () => any;\n}\n\nconst ReproModal: React.FC<Props> = ({ visible, onCancel }) => {\n  return (\n    <Modal\n      title={\n        <FormattedMessage\n          id=\"repro.about\"\n          defaultMessage=\"About Reproductions\"\n        />\n      }\n      footer=\"\"\n      visible={visible}\n      onCancel={onCancel}\n      width=\"680px\"\n    >\n      <I18n className=\"paragraph\" id=\"reproModal\" />\n    </Modal>\n  );\n};\n\nexport default ReproModal;\n","export default function createPreview(issueType: string, values: any, locale: string) {\n  if (issueType === 'bug') {\n    return createBugPreview(values, locale);\n  }\n  return createFeaturePreview(values, locale);\n}\n\nfunction createBugPreview({\n  version,\n  weapp,\n  react,\n  system,\n  browser,\n  reproduction,\n  steps,\n  expected,\n  actual,\n  extra,\n  repo,\n}: any, locale: string) {\nif (locale === 'zh') {\n  return `\n### 重现链接\n${createReproductionLink(reproduction) || '无'}\n\n### 重现步骤\n${steps}\n\n### 期望的结果是什么？\n${expected}\n\n### 实际的结果是什么？\n${actual}\n\n| 环境 | 版本 |\n|---|---|\n| Wux | ${version} |\n| 微信小程序基础库 | ${weapp} |\n| 系统 | ${system} |\n\n${extra ? `---\\n${extra}` : ''}\n`.trim();\n}  \n  return `\n### Reproduction link\n${createReproductionLink(reproduction) || 'null'}\n\n### Steps to reproduce\n${steps}\n\n### What is expected?\n${expected}\n\n### What is actually happening?\n${actual}\n\n| Environment | Info |\n|---|---|\n| Wux | ${version} |\n| Wechat Miniprogram | ${weapp} |\n| System | ${system} |\n\n${extra ? `---\\n${extra}` : ''}\n`.trim();\n}\n\nfunction createFeaturePreview({ motivation, proposal }: any, locale: string) {\nif (locale === 'zh') {\n  return `\n### 你期望的 API 是怎样的？\n${motivation}\n\n### 请确保将 issue 发往相关的仓库。\n${proposal}\n`.trim();\n}\n  return `\n### What problem does this feature solve?\n${motivation}\n\n### What does the proposed API look like?\n${proposal}\n`.trim();\n}\n\nfunction createReproductionLink(link: string) {\n  if (!link) {\n    return;\n  }\n\n  if (link.indexOf('codesandbox.io') >= 0) {\n    return `[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](${link})`;\n  }\n\n  return `[${link}](${link})`;\n}\n","const compareVersions: any = require(\"compare-versions\");\n\ninterface Response {\n  status: number;\n  statusText: string;\n  json(): any;\n}\n\nconst npmEndpoint = \"https://registry.npm.taobao.org\";\nconst endpoint = \"https://api.github.com\";\n\nconst npmMapping: { [repo: string]: string } = {\n  \"wux-weapp\": \"wux-weapp\"\n};\n\nfunction checkStatus(response: Response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    throw new Error(response.statusText);\n  }\n}\n\nfunction orderVersions(versions: string[]): string[] {\n  const normalVersions: string[] = [];\n  const nextVersions: string[] = [];\n  versions.forEach(version => {\n    if (version.match(/^\\d+\\.\\d+\\.\\d+$/) || version.includes(\"-rc.\")) {\n      normalVersions.push(version);\n    } else {\n      nextVersions.push(version);\n    }\n  });\n\n  return [\n    ...normalVersions.sort((a: string, b: string) => -compareVersions(a, b)),\n    ...nextVersions.sort((a: string, b: string) => -compareVersions(a, b))\n  ];\n}\n\nexport function fetchVersions(repo: string) {\n  const npmPromise = fetch(`${npmEndpoint}/${npmMapping[repo]}`)\n    .then(checkStatus)\n    .then((response: Response) => response.json())\n    .then(({ versions }) =>\n      Object.keys(versions).filter(ver => !ver.includes(\"-\"))\n    )\n    .then(versions => orderVersions(versions))\n    .then(versions => versions.slice(0, 100));\n\n  // We use github versions first, but if failed use npm versions as backup\n  return fetch(`${endpoint}/repos/wux-weapp/${repo}/releases?per_page=100`)\n    .then(checkStatus)\n    .then((response: Response) => response.json())\n    .then(releases => releases.filter((r: any) => !r.prerelease))\n    .then(releases => releases.map((r: any) => r.tag_name))\n    .then(versions => orderVersions(versions))\n    .catch(err => {\n      console.warn(err);\n      return npmPromise;\n    });\n}\n\nexport function fetchIssues(repo: string, keyword: string) {\n  const q = encodeURIComponent(`is:issue repo:wux-weapp/${repo} ${keyword}`);\n  return fetch(`${endpoint}/search/issues?q=${q}&per_page=5`)\n    .then(checkStatus)\n    .then((response: Response) => response.json())\n    .then(json => json.items);\n}\n","import * as api from \"../api\";\nimport { state } from \"reactive.macro\";\n\nexport default function useSimilarIssues() {\n  let similarIssues: any[] = state([]);\n\n  const searchIssues = (repo: string, title: string) => {\n    if (title) {\n      api.fetchIssues(repo, title).then(_issues => (similarIssues = _issues));\n    } else {\n      similarIssues = [];\n    }\n  };\n\n  return {\n    similarIssues,\n    searchIssues\n  };\n}\n","import * as api from \"../api\";\nimport { state } from \"reactive.macro\";\n\nexport default function useVersions() {\n  let repoVersions: { [repo: string]: string[] } = state({});\n\n  const fetchVersions = (repo: string) => {\n    api.fetchVersions(repo).then(\n      (versions: string[]) =>\n        (repoVersions = {\n          ...repoVersions,\n          [repo]: versions\n        })\n    );\n  };\n\n  return { repoVersions, fetchVersions };\n}\n","import * as React from \"react\";\nimport { Form, Row, Col, Input, Select, Button, Radio } from \"antd\";\nimport { FormattedMessage } from \"react-intl\";\nimport { BugOutlined } from \"@ant-design/icons\";\nimport { state } from \"reactive.macro\";\nimport BugForm from \"./BugForm\";\nimport FeatureForm from \"./FeatureForm\";\nimport PreviewModal from \"./PreviewModal\";\nimport ReproModal from \"./ReproModal\";\nimport createPreview from \"./createPreview\";\nimport useSimilarIssues from \"./hooks/useSimilarIssues\";\nimport useVersions from \"./hooks/useVersions\";\nimport styles from \"./IssueForm.module.scss\";\n\nconst { Option } = Select;\n\nconst params: any = window.location.search\n  .slice(1)\n  .split(\"&\")\n  .reduce((acc, param) => {\n    const [key, value] = param.split(\"=\");\n    return { ...acc, [key]: value };\n  }, {}); // tslint:disable-line\n\nif (!params.repo) {\n  params.repo = \"wux-weapp\";\n}\n\nconst IssueForm: React.FC<{ locale: string }> = (props) => {\n  const { locale } = props\n  let reproModal = state(false);\n\n  const [form] = Form.useForm();\n\n  const getContent = (type: string) =>\n    createPreview(type, form.getFieldsValue(), locale);\n\n  const [content, setContent] = React.useState(\"\");\n  const [preview, setPreview] = React.useState(false);\n  const triggerPreview = (newPreview: boolean) => {\n    setContent(getContent(form.getFieldValue(\"type\")));\n    setPreview(newPreview);\n  };\n\n  const formRef = React.useRef<HTMLDivElement | null>(null);\n  const { similarIssues, searchIssues } = useSimilarIssues();\n  const { repoVersions, fetchVersions } = useVersions();\n\n  const bindModalHandler = React.useCallback(() => {\n    formRef.current!.addEventListener(\"click\", (e: Event) => {\n      if ((e.target as any).getAttribute(\"href\") === \"#repro-modal\") {\n        e.preventDefault();\n        reproModal = true;\n      }\n    });\n  }, []);\n\n  // Load form data from localStorage\n  const restoreValues = React.useCallback((omitFields: Array<string> = []) => {\n    const cache = localStorage.getItem(\"form\");\n    if (cache) {\n      const values = JSON.parse(cache);\n      const keys = Object.keys(values);\n\n      // Remove unless fields\n      omitFields.forEach(key => {\n        delete values[key];\n      });\n\n      if (values.type) {\n        form.setFieldsValue({\n          type: values.type\n        });\n      }\n\n      // Next frame (IE 9 not support RAF)\n      setTimeout(() => {\n        // Remove useless value\n        const currentValues = form.getFieldsValue();\n        keys.forEach(key => {\n          if (!(key in currentValues)) {\n            delete values[key];\n          }\n        });\n\n        form.setFieldsValue(values);\n      }, 100);\n    }\n  }, []);\n\n  const handleRepoChange = React.useCallback((repo: string) => {\n    form.resetFields([\"version\"]);\n    if (!repoVersions[repo]) {\n      fetchVersions(repo);\n    }\n  }, []);\n\n  const handleTypeChange = React.useCallback(() => {\n    restoreValues([\"type\"]);\n  }, []);\n\n  const handleTitleBlur = React.useCallback(() => {\n    const repo = form.getFieldValue(\"repo\");\n    const title = form.getFieldValue(\"title\");\n    searchIssues(repo, title);\n  }, []);\n\n  const handleCreate = React.useCallback(() => {\n    const issueType = form.getFieldValue(\"type\");\n    const repo = form.getFieldValue(\"repo\");\n    const title = encodeURIComponent(form.getFieldValue(\"title\")).replace(\n      /%2B/gi,\n      \"+\"\n    );\n    const content = getContent(issueType);\n    const withConfirm = locale === 'zh' ? `\n- [ ] 我已经搜索过相关 [issues](https://github.com/wux-weapp/${repo}/issues) \\\n，确定这个问题没有人提过。\n\n${content}\n` : `\n- [ ] I have searched the [issues](https://github.com/wux-weapp/${repo}/issues) \\\nof this repository and believe that this is not a duplicate.\n\n${content}\n`;\n    const withMarker = locale === 'zh' ? `${withConfirm}\\n\\n<!-- 由 wux issue helper 生成。请勿移除 -->` :\n      `${withConfirm}\\n\\n<!-- generated by wux-issue-helper. DO NOT REMOVE -->`;\n    const body = encodeURIComponent(withMarker).replace(/%2B/gi, \"+\");\n    const label = issueType === \"feature\" ? \"&labels=💡%20Feature%20Request\" : \"\";\n\n    localStorage.clear();\n\n    window.open(\n      `https://github.com/wux-weapp/${repo}/issues/new?title=${title}&body=${body}${label}`\n    );\n  }, [locale]);\n\n  React.useEffect(() => {\n    fetchVersions(params.repo);\n    bindModalHandler();\n    restoreValues();\n  }, []);\n\n  const repo = form.getFieldValue(\"repo\");\n  const versions = repoVersions[repo] || [];\n\n  const similarIssuesList = (\n    <Form.Item className={styles.similar}>\n      {locale === 'zh' ? <h3>类似问题:</h3> : <h3>Similar Issues:</h3>}\n      <ul>\n        {similarIssues.map(issue => (\n          <li key={issue.id}>\n            <a href={issue.html_url} target=\"_blank\" rel=\"noreferrer noopener\">\n              {issue.title}\n            </a>\n          </li>\n        ))}\n      </ul>\n    </Form.Item>\n  );\n\n  return (\n    <div ref={formRef}>\n      <Form\n        form={form}\n        layout=\"vertical\"\n        size=\"large\"\n        initialValues={{\n          repo: params.repo,\n          type: \"bug\",\n          version: versions[0]\n        }}\n        onFinish={() => {\n          triggerPreview(true);\n        }}\n        onValuesChange={(_, values) => {\n          let preForm = {};\n          try {\n            preForm = JSON.parse(localStorage.getItem(\"form\") as string) || {};\n          } catch (err) {\n            // Do nothing\n          }\n          const cacheForm: any = {\n            ...preForm\n          };\n          Object.keys(values).forEach(key => {\n            if (values[key]) {\n              cacheForm[key] = values[key];\n            }\n          });\n          localStorage.setItem(\"form\", JSON.stringify(cacheForm, null, 2));\n        }}\n      >\n        <PreviewModal\n          visible={preview}\n          content={content}\n          onCancel={() => {\n            triggerPreview(false);\n          }}\n          onCreate={handleCreate}\n        />\n        <ReproModal\n          visible={reproModal}\n          onCancel={() => (reproModal = false)}\n        />\n        <Row>\n          <Col span={11}>\n            <Form.Item\n              name=\"repo\"\n              label={\n                <FormattedMessage\n                  id=\"issue.repo\"\n                  defaultMessage=\"I am opening an issue for\"\n                />\n              }\n              help={\n                <FormattedMessage\n                  id=\"issue.repoHelp\"\n                  defaultMessage=\"Please make sure to file the issue at appropriate repo.\"\n                />\n              }\n            >\n              <Select onChange={handleRepoChange}>\n                <Option value=\"wux-weapp\">wux-weapp</Option>\n              </Select>\n            </Form.Item>\n          </Col>\n          <Col span={12} offset={1}>\n            <Form.Item\n              name=\"type\"\n              label={\n                <FormattedMessage id=\"issue.type\" defaultMessage=\"This is a\" />\n              }\n            >\n              <Radio.Group\n                onChange={handleTypeChange}\n                className={styles.radioGroup}\n              >\n                <Radio.Button value=\"bug\">\n                  <FormattedMessage\n                    id=\"issue.type.bug\"\n                    defaultMessage=\"Bug Report\"\n                  />\n                </Radio.Button>\n                <Radio.Button value=\"feature\">\n                  <FormattedMessage\n                    id=\"issue.type.feature\"\n                    defaultMessage=\"Feature Request\"\n                  />\n                </Radio.Button>\n              </Radio.Group>\n            </Form.Item>\n          </Col>\n        </Row>\n        <Form.Item\n          name=\"title\"\n          label={<FormattedMessage id=\"issue.title\" defaultMessage=\"Title\" />}\n          rules={[{ required: true }]}\n        >\n          <Input onBlur={handleTitleBlur} />\n        </Form.Item>\n        {similarIssues.length > 0 && similarIssuesList}\n        <Form.Item\n          noStyle\n          shouldUpdate={(prev, next) => prev.type !== next.type}\n        >\n          {() =>\n            form.getFieldValue(\"type\") === \"feature\" ? (\n              <FeatureForm />\n            ) : (\n              <BugForm versions={versions} />\n            )\n          }\n        </Form.Item>\n        <Form.Item>\n          <div className={styles.submitBtn}>\n            <Button\n              type=\"primary\"\n              size=\"large\"\n              htmlType=\"submit\"\n              icon={<BugOutlined />}\n            >\n              <FormattedMessage id=\"issue.preview\" defaultMessage=\"Preview\" />\n            </Button>\n          </div>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n};\n\nexport default IssueForm;\n","import * as React from \"react\";\nimport { IntlProvider, addLocaleData } from \"react-intl\";\nimport { Layout, Button, BackTop } from \"antd\";\nimport Intro from \"./Intro\";\nimport IssueForm from \"./IssueForm\";\nimport LocaleContext, { switchLocale } from \"./LocaleContext\";\nimport styles from \"./App.module.scss\";\n\nconst { Header, Content, Footer } = Layout;\n\nconst App: React.FC = () => {\n  const locale = React.useContext(LocaleContext);\n  const [localeString, forceUpdateLocale] = React.useState(locale);\n\n  const appLocale = window.appLocale[localeString];\n  addLocaleData(appLocale.data);\n\n  return (\n    <LocaleContext.Provider>\n      <Layout className=\"layout\">\n        <Header className={styles.header}>\n          <div className={styles.headerContainer}>\n            <div className={styles.logo}>\n              <img\n                alt=\"logo\"\n                src=\"http://cdn.skyvow.cn/logo.png\"\n              />\n              <h1>Issue Helper</h1>\n            </div>\n            <div className={styles.locale}>\n              <Button\n                size=\"small\"\n                onClick={() => switchLocale(forceUpdateLocale)}\n              >\n                {localeString === \"en\" ? \"中文\" : \"English\"}\n              </Button>\n            </div>\n          </div>\n        </Header>\n        <IntlProvider locale={localeString} messages={appLocale.messages}>\n          <Content className={styles.content}>\n            <Intro />\n            <IssueForm locale={localeString} />\n          </Content>\n        </IntlProvider>\n        <Footer style={{ textAlign: \"center\" }}>\n          Inspired by{\" \"}\n          <a\n            href=\"https://new-issue.vuejs.org/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Vue Issue Helper\n          </a>{\" \"}\n          ·{\" \"}\n          <a href=\"https://github.com/wux-weapp/wux-issue-helper\">\n            Source Code\n          </a>\n        </Footer>\n        <BackTop />\n      </Layout>\n    </LocaleContext.Provider>\n  );\n};\n\nexport default App;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport \"./en-US\";\nimport \"./zh-CN\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\") as HTMLElement);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"App_header__2L3DO\",\"headerContainer\":\"App_headerContainer__3EsT6\",\"logo\":\"App_logo__2qPv-\",\"content\":\"App_content__1Wt3K\"};"],"sourceRoot":""}